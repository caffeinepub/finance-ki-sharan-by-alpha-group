{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Replace calculator breakdown bar chart with reusable pie/donut chart",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a reusable invested-vs-earned pie/donut breakdown component that matches existing theme tokens and preserves the current empty-state card behavior.",
      "acceptanceCriteria": [
        "A new pie/donut breakdown component exists under frontend/src/components/calculators (new file) and can be imported by calculator pages.",
        "Given invested > 0 or earned > 0, the chart renders slices for invested and earned with correct proportions based on invested + earned.",
        "Given invested=0 and earned=0 (and total absent or 0), the component renders the same kind of card-based empty state prompting the user to enter valid inputs.",
        "The component uses existing theme color tokens (e.g., chart variables) and remains legible in both light and dark mode.",
        "The component includes a legend that shows the label + exact INR-formatted value for each slice (and uses the same label override behavior as the current bar chart component)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/calculators/ResultBreakdownPieChart.tsx",
          "operation": "create",
          "description": "Create a new reusable ResultBreakdownPieChart component (pie/donut) using existing Card UI composition and existing theme tokens (e.g., bg-chart-1/bg-chart-2 and related foreground tokens). Match the current breakdown card structure (title, border style) and reuse the same empty-state message when invested/earned/total are all zero/absent. Support props parity with ResultBreakdownBarChart (invested, earned, optional total, and optional label overrides), render invested+earned proportions based on invested+earned, and include a legend that displays each slice label plus INR-formatted value via formatINR. Avoid adding any new charting library dependency."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Replace ResultBreakdownBarChart usage with the new pie/donut component in SIP, Lump Sum, and PPF calculator pages without changing layout or displayed values.",
      "acceptanceCriteria": [
        "frontend/src/pages/SIPCalculatorPage.tsx no longer renders ResultBreakdownBarChart and instead renders the pie/donut breakdown with the same invested/earned/total inputs and labels.",
        "frontend/src/pages/LumpSumCalculatorPage.tsx no longer renders ResultBreakdownBarChart and instead renders the pie/donut breakdown with the same invested/earned/total inputs and labels.",
        "frontend/src/pages/PPFCalculatorPage.tsx no longer renders ResultBreakdownBarChart and instead renders the pie/donut breakdown with the same invested/earned/total inputs and labels.",
        "All updated calculator pages compile without unused-import warnings and render the breakdown correctly."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/SIPCalculatorPage.tsx",
          "operation": "modify",
          "description": "Replace the ResultBreakdownBarChart import and usage with ResultBreakdownPieChart, keeping the component placement directly below the numeric results summary. Preserve the exact invested/earned/total values and label overrides currently passed (Total Invested / Estimated Returns / Maturity Value), and ensure no unused imports remain."
        },
        {
          "path": "frontend/src/pages/LumpSumCalculatorPage.tsx",
          "operation": "modify",
          "description": "Replace the ResultBreakdownBarChart import and usage with ResultBreakdownPieChart, keeping the component placement directly below the numeric results summary. Preserve the exact invested/earned/total values and label overrides currently passed (Investment Amount / Total Gain / Maturity Value), and ensure no unused imports remain."
        },
        {
          "path": "frontend/src/pages/PPFCalculatorPage.tsx",
          "operation": "modify",
          "description": "Replace the ResultBreakdownBarChart import and usage with ResultBreakdownPieChart, keeping the component placement directly below the numeric results summary. Preserve the exact invested/earned/total values and label overrides currently passed (Total Invested / Interest Earned / Maturity Value), and ensure no unused imports remain."
        }
      ]
    }
  ]
}